export class ItmViewmap ::
  by_mime = {}

  find_mime(mime) ::
    let by_mime = this.by_mime
    let view_fn = by_mime[mime]
    while view_fn && !view_fn.call ::
      view_fn = by_mime[view_fn] // resolve aliases
    return view_fn

